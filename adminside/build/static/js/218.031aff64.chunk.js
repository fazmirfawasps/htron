"use strict";(self.webpackChunkadminside=self.webpackChunkadminside||[]).push([[218],{4218:function(e,n,t){t.r(n),t.d(n,{default:function(){return S}});var o,a=t(9439),l=t(2791),i=t(168),r=t(6157),c=t(3027),s=t(3272),d=t(6088),u=(t(7632),t(3329)),g=d.Z.div(o||(o=(0,i.Z)(["\n  @import '../../node_modules/bootstrap/dist/css/bootstrap.min.css'\n"])));function h(e){var n=(0,l.useState)(!1),t=(0,a.Z)(n,2),o=t[0],i=t[1],d=(0,l.useState)(""),h=(0,a.Z)(d,2),m=h[0],f=h[1],C=(0,l.useState)(!1),p=(0,a.Z)(C,2),x=p[0],Z=p[1],j=(0,l.useState)(null),v=(0,a.Z)(j,2),y=v[0],k=v[1],b=(0,l.useState)(null),w=(0,a.Z)(b,2),S=w[0],F=w[1];(0,l.useEffect)((function(){console.log("nthey vallathum nadanna"),console.log(y)}),[y]);(0,l.useEffect)((function(){e.id&&(console.log(e.id.image),F(e.id.image),console.log("editil matram ullu"))}),[e.id]),console.log(e);var T=function(){return i(!1)},A=function(n){e.id?(e.onChange(n.target.value,e.id._id),Z(!0),f(n.target.value)):(e.onChange(n.target.value),f(n.target.value))};return(0,u.jsxs)(g,{children:[(0,u.jsx)(r.Z,{variant:"secondary",onClick:function(){return i(!0)},children:e.id?e.icon:e.data.title}),(0,u.jsxs)(s.Z,{show:o,onHide:T,style:{marginTop:"10vw"},children:[(0,u.jsx)(s.Z.Header,{closeButton:!0,children:(0,u.jsx)(s.Z.Title,{children:e.data.title})}),(0,u.jsx)(s.Z.Body,{children:(0,u.jsxs)(c.Z,{children:[(0,u.jsxs)(c.Z.Group,{className:"mb-3",controlId:"exampleForm.ControlInput1",children:[(0,u.jsx)(c.Z.Label,{children:"Name"}),e.id?(0,u.jsx)(c.Z.Control,{type:"name",value:x?m:e.id.Category,onChange:A}):(0,u.jsx)(c.Z.Control,{type:"name",value:m,onChange:A}),(0,u.jsx)("p",{children:e.error?e.error:""})]}),(0,u.jsxs)(c.Z.Group,{controlId:"formFile",className:"mb-3",children:[(0,u.jsx)(c.Z.Label,{children:"Upload File"}),(0,u.jsx)(c.Z.Control,{type:"file",onChange:function(n){console.log(n.target.files[0]);var t=n.target.files[0];k(t),console.log(t),k(t),e.imageChange(n.target.files[0]),console.log(y),console.log(y);var o=URL.createObjectURL(n.target.files[0]);F(o)}})]}),S&&(0,u.jsx)("img",{src:S,style:{width:"100px"},alt:"uploaded file preview"})]})}),(0,u.jsxs)(s.Z.Footer,{children:[(0,u.jsx)(r.Z,{variant:"secondary",onClick:T,children:"Close"}),(0,u.jsx)(r.Z,{variant:"primary",onClick:function(){return Z(!1),console.log("jnesdd"),console.log(m),console.log(y),e.onClick(),i(!1)},children:"submit"})]})]})]})}var m=t(7854);function f(e){var n=(0,l.useState)(""),t=(0,a.Z)(n,2),o=t[0],i=t[1],r=(0,l.useState)("null"),c=(0,a.Z)(r,2),s=c[0],d=c[1],g=(0,l.useState)(""),f=(0,a.Z)(g,2),C=f[0],p=f[1];return(0,u.jsx)("div",{children:(0,u.jsx)(h,{onClick:function(){console.log("Child element clicked"),console.log(s);var n=new FormData;n.append("image",s),n.append("name",o),console.log(n),o.length>1?m.Z.post("/admin/addcategory",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(){e.handleChange(),console.log(e.change),i(""),p("")})):p("more than 2 character")},onChange:function(e){i(e)},data:{title:"Add Category"},id:!1,error:C,imageChange:function(e){d(e)}})})}var C=t(1413),p=t(6247),x=t(9135),Z=t(2062),j=t.n(Z);function v(e){console.log("ntho patti"),console.log(e.data.image);var n=(0,l.useState)("null"),t=(0,a.Z)(n,2),o=t[0],i=t[1],r=(0,u.jsx)(x.fmQ,{}),c=(0,l.useState)(""),s=(0,a.Z)(c,2),d=s[0],g=s[1],f=(0,l.useState)(e.data._id),p=(0,a.Z)(f,2),Z=p[0],j=p[1];return(0,u.jsx)(h,{data:{title:"Edit Category"},icon:r,id:e.data,onClick:function(){console.log(o),console.log("Child element clicked"),console.log(Z);var n=new FormData;n.append("image",o),n.append("Category",d),n.append("old",e.data.image),n.append("oldname",e.data.Category),n.append("id",Z),console.log(n),m.Z.post("/admin/editcategory",n,{headers:{"Content-Type":"multipart/form-data"}}).then((function(n){var t=n.data.map((function(n){return(0,C.Z)((0,C.Z)({},n),{},{delete:(0,u.jsx)(y,{data:n,onClick:e.onClick}),image:(0,u.jsx)("img",{src:n.image,style:{width:"50px"}}),edit:(0,u.jsx)(v,{data:n,onClick:e.onClick})})}));e.onClick(t)}))},onChange:function(e,n){g(e),j(n)},imageChange:function(e){i(e),j(Z)}})}function y(e){var n=e.data,t=e.onClick;console.log(n);return(0,u.jsx)("div",{children:(0,u.jsxs)("button",{style:{width:"48px",height:"40px",backgroundColor:"black",borderColor:"white",borderRadius:"20%"},children:["      ",(0,u.jsx)(x.AMf,{onClick:function(){j()({title:"Are you sure?",text:"This action cannot be undone!",icon:"warning",buttons:["Cancel","Delete"],dangerMode:!0}).then((function(e){e?(console.log(n._id),m.Z.delete("/admin/category",{data:{id:n._id,name:n.Category}}).then((function(e){var n=e.data;console.log(n);var o=n.map((function(e){return(0,C.Z)((0,C.Z)({},e),{},{delete:(0,u.jsx)(y,{data:e,onClick:t}),image:(0,u.jsx)("img",{src:e.image,style:{width:"50px"}}),edit:(0,u.jsx)(v,{data:e,onClick:onclick})})}));t(o),j()("Poof! Your file has been deleted!",{icon:"success"})}))):j()("Your file is safe!")})),console.log("working delete category")},color:"white",size:15})]})})}function k(e){var n=(0,l.useState)([]),t=(0,a.Z)(n,2),o=t[0],i=t[1],r=function(e){i(e)};return(0,l.useEffect)((function(){m.Z.get("/admin/category").then((function(e){var n=e.data;console.log(n);var t=n.map((function(e){return(0,C.Z)((0,C.Z)({},e),{},{delete:(0,u.jsx)(y,{data:e,onClick:r}),image:(0,u.jsx)("img",{src:e.image,style:{width:"50px"}}),edit:(0,u.jsx)(v,{data:e,onClick:r})})}));i(t),console.log(t)}))}),[e.change]),(0,u.jsx)(p.Z,{Data:o})}var b=t(4554),w=t(890),S=function(){var e=(0,l.useState)(!1),n=(0,a.Z)(e,2),t=n[0],o=n[1],i=function(){o(!t)};return(0,u.jsxs)(b.Z,{children:[(0,u.jsx)(w.Z,{variant:"h4",textAlign:"center",m:2,children:"CATEGORY"}),(0,u.jsx)(f,{handleChange:i,change:t}),(0,u.jsx)(k,{change:t,handleChange:i})]})}}}]);
//# sourceMappingURL=218.031aff64.chunk.js.map